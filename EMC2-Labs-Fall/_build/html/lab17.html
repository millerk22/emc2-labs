<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Lab 17: Recursion Reloaded &#8212; Math 495R EMC2 Python Labs</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=83e35b93" />
    <link rel="stylesheet" type="text/css" href="_static/material.css?v=79c92029" />
    <script src="_static/documentation_options.js?v=6fefd858"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Lab 18: Modular Arithmetic" href="lab18.html" />
    <link rel="prev" title="Lab 16: The Gram-Schmidt Process" href="lab16.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue-grey data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#lab17" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="index.html" title="Math 495R EMC2 Python Labs"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Fall EMC2 Labs</span>
          <span class="md-header-nav__topic"> Lab 17: Recursion Reloaded </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder=""Search""
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = ""versions.json"",
        target_loc = "../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">Math 495R EMC2 Python Labs</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="index.html" title="Math 495R EMC2 Python Labs" class="md-nav__button md-logo">
      
        <img src="_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="index.html"
       title="Math 495R EMC2 Python Labs">Fall EMC2 Labs</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="lab01.html" class="md-nav__link">Lab 1: Introduction to Python, Part I</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab02.html" class="md-nav__link">Lab 2: Introduction to Python, Part II</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab03.html" class="md-nav__link">Lab 3: Introduction to Python, Part III</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab04.html" class="md-nav__link">Lab 4: Introduction to LaTeX</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab05.html" class="md-nav__link">Lab 5: Vector Arithmetic Using Python Lists</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab06.html" class="md-nav__link">Lab 6: The Caesar Cipher</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab07.html" class="md-nav__link">Lab 7: Matrix Row Reduction</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab08.html" class="md-nav__link">Lab 8: The Vigen√®re Cipher</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab09.html" class="md-nav__link">Lab 9: Solving Systems of Linear Equations</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab10.html" class="md-nav__link">Lab 10: Counterexamples</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab11.html" class="md-nav__link">Lab 11: Inverting matrices</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab12.html" class="md-nav__link">Lab 12: Recursion</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab13.html" class="md-nav__link">Lab 13: Basis-finding</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab14.html" class="md-nav__link">Lab 14: Applications of Eigenvectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab15.html" class="md-nav__link">Lab 15: The Euclidean Algorithm</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab16.html" class="md-nav__link">Lab 16: The Gram-Schmidt Process</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Lab 17: Recursion Reloaded </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Lab 17: Recursion Reloaded</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">"Contents"</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#lab17--page-root" class="md-nav__link">Lab 17: Recursion Reloaded</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#systems-of-one-way-roads" class="md-nav__link">Systems of One-Way Roads</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#task-1" class="md-nav__link">Task 1</a>
        </li>
        <li class="md-nav__item"><a href="#task-2" class="md-nav__link">Task 2</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#a-problem-with-recursion" class="md-nav__link">A problem with recursion</a>
        </li>
        <li class="md-nav__item"><a href="#task-3-fast-fibonacci" class="md-nav__link">Task 3: Fast Fibonacci</a>
        </li>
        <li class="md-nav__item"><a href="#task-4-towers-of-hanoi" class="md-nav__link">Task 4: Towers of Hanoi</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="_sources/lab17.rst.txt">Show Source</a> </li>

  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab18.html" class="md-nav__link">Lab 18: Modular Arithmetic</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab19.html" class="md-nav__link">Lab 19: Image Compression with SVD</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab20.html" class="md-nav__link">Lab 20: Cracking the Vigen√®re Cipher</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab21.html" class="md-nav__link">Lab 21: Least Squares</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab22.html" class="md-nav__link">Lab 22: Determinants</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab23.html" class="md-nav__link">Lab 23: The Lean Theorem Prover</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lab24.html" class="md-nav__link">Lab 24: Lucas Sequences</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">"Contents"</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#lab17--page-root" class="md-nav__link">Lab 17: Recursion Reloaded</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#systems-of-one-way-roads" class="md-nav__link">Systems of One-Way Roads</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#task-1" class="md-nav__link">Task 1</a>
        </li>
        <li class="md-nav__item"><a href="#task-2" class="md-nav__link">Task 2</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#a-problem-with-recursion" class="md-nav__link">A problem with recursion</a>
        </li>
        <li class="md-nav__item"><a href="#task-3-fast-fibonacci" class="md-nav__link">Task 3: Fast Fibonacci</a>
        </li>
        <li class="md-nav__item"><a href="#task-4-towers-of-hanoi" class="md-nav__link">Task 4: Towers of Hanoi</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="_sources/lab17.rst.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="lab-17-recursion-reloaded">
<h1 id="lab17--page-root">Lab 17: Recursion Reloaded<a class="headerlink" href="#lab17--page-root" title="Link to this heading">¬∂</a></h1>
<section id="systems-of-one-way-roads">
<h2 id="systems-of-one-way-roads">Systems of One-Way Roads<a class="headerlink" href="#systems-of-one-way-roads" title="Link to this heading">¬∂</a></h2>
<p>In Section 15 of the <a class="reference external" href="https://mathdept.byu.edu/~doud/Transition/Transition.pdf">Math 290 textbook</a> it is shown that any finite set of cities with a system of one-way roads connecting them has a valid path (re-read that section if you don‚Äôt remember what these terms mean).
We will write a program that finds a valid path through any such system of roads.</p>
<p>First, we need to generate systems of roads.
A system of one-way roads through <code class="docutils literal notranslate"><span class="pre">n</span></code> cities can be represented as a list of <code class="docutils literal notranslate"><span class="pre">n</span></code> city names together with an <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">x</span> <span class="pre">n</span></code> matrix <code class="docutils literal notranslate"><span class="pre">A</span></code>, where</p>
<div class="math notranslate nohighlight">
\[\begin{split}A[i,j] =
\begin{cases}
   0 &amp; \text{ if }i=j, \\
   1 &amp; \text{ if there is a road from $i$ to $j$}, \\
   -1 &amp; \text{ if there is a road from $j$ to $i$}.
\end{cases}\end{split}\]</div>
<p>For example, the system of roads through five cities pictured on p. 108 of the Math 290 textbook would be represented by the list <code class="docutils literal notranslate"><span class="pre">L</span> <span class="pre">=</span> <span class="pre">['A',</span> <span class="pre">'B',</span> <span class="pre">'C',</span> <span class="pre">'D',</span> <span class="pre">'E']</span></code> together with the matrix</p>
<div class="math notranslate nohighlight">
\[\begin{split}M = \left[\begin{matrix}
   0 &amp; -1 &amp; 1 &amp; -1 &amp; -1 \\
   1 &amp; 0 &amp; -1 &amp; 1 &amp; 1 \\
   -1 &amp; 1 &amp; 0 &amp; -1 &amp; 1 \\
   1 &amp; -1 &amp; 1 &amp; 0 &amp; -1 \\
   1 &amp; -1 &amp; -1 &amp; 1 &amp; 0
\end{matrix}\right].\end{split}\]</div>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">M</span></code> is antisymmetric, meaning that <code class="docutils literal notranslate"><span class="pre">transpose(M)</span> <span class="pre">=</span> <span class="pre">-M</span></code>.</p>
<section id="task-1">
<h3 id="task-1">Task 1<a class="headerlink" href="#task-1" title="Link to this heading">¬∂</a></h3>
<p>Write a function <code class="docutils literal notranslate"><span class="pre">random_system(n)</span></code> that takes as input a positive integer <code class="docutils literal notranslate"><span class="pre">n</span></code> and returns a random system of one-way roads through <code class="docutils literal notranslate"><span class="pre">n</span></code> cities as an <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">x</span> <span class="pre">n</span></code> matrix as described above.
If you need help generating random integers, read about the function <code class="docutils literal notranslate"><span class="pre">randint</span></code> online. You will need to import <code class="docutils literal notranslate"><span class="pre">random</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
</pre></div>
</div>
<p>To find a valid path through <code class="docutils literal notranslate"><span class="pre">n</span></code> cities: let <code class="docutils literal notranslate"><span class="pre">X</span></code> be the first city in the list <code class="docutils literal notranslate"><span class="pre">L</span></code>.
For each other city <code class="docutils literal notranslate"><span class="pre">Y</span></code> say that <code class="docutils literal notranslate"><span class="pre">Y</span></code> is a red city if there is a road from <code class="docutils literal notranslate"><span class="pre">X</span></code> to <code class="docutils literal notranslate"><span class="pre">Y</span></code> (i.e. <code class="docutils literal notranslate"><span class="pre">A[X,Y]=1</span></code>) and say that <code class="docutils literal notranslate"><span class="pre">Y</span></code> is a blue city if there is a road from <code class="docutils literal notranslate"><span class="pre">Y</span></code> to <code class="docutils literal notranslate"><span class="pre">X</span></code> (i.e. <code class="docutils literal notranslate"><span class="pre">A[X,Y]=-1</span></code>).
Then form two smaller systems of one way roads, one comprising the red cities, and the other comprising the blue cities (where the order of the labels is preserved).
For example, for the matrix <code class="docutils literal notranslate"><span class="pre">M</span></code> above, we have <code class="docutils literal notranslate"><span class="pre">X=A</span></code> and</p>
<div class="math notranslate nohighlight">
\[\begin{split}M_\text{red} =
\left[
\begin{matrix}
   0
\end{matrix}
\right], \quad L_{\text{red}} = [C]
\quad \text{ and } \quad
M_\text{blue} =
\left[
\begin{matrix}
   0 &amp; 1 &amp; 1 \\
   -1 &amp; 0 &amp; -1 \\
   -1 &amp; 1 &amp; 0
\end{matrix}
\right], \quad L_{\text{blue}} = [B,D,E].\end{split}\]</div>
<p>Now we (recursively) find a valid path through the red cities and a valid path through the blue cities and combine them to make the path</p>
<div class="math notranslate nohighlight">
\[[\text{path through blue cities}] \rightarrow X \rightarrow [\text{path through red cities}].\]</div>
</section>
<section id="task-2">
<h3 id="task-2">Task 2<a class="headerlink" href="#task-2" title="Link to this heading">¬∂</a></h3>
<p>Write a function <code class="docutils literal notranslate"><span class="pre">valid_path(M,L)</span></code> that takes as input an <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">x</span> <span class="pre">n</span></code> matrix <code class="docutils literal notranslate"><span class="pre">M</span></code> and a list <code class="docutils literal notranslate"><span class="pre">L</span></code> of length <code class="docutils literal notranslate"><span class="pre">n</span></code>, and returns a valid path through the cities as a list of length <code class="docutils literal notranslate"><span class="pre">n</span></code>. The list <code class="docutils literal notranslate"><span class="pre">L</span></code> contains the names of the cities.
For example, the function should return <code class="docutils literal notranslate"><span class="pre">[B,</span> <span class="pre">E,</span> <span class="pre">D,</span> <span class="pre">A,</span> <span class="pre">C]</span></code> as the path for the example above.</p>
<p>If you want to make a copy of a list of lists, such as the matrix <code class="docutils literal notranslate"><span class="pre">M</span></code>, it is (unfortunately) not as simple as calling <code class="docutils literal notranslate"><span class="pre">M.copy()</span></code>.
The <code class="docutils literal notranslate"><span class="pre">copy</span></code> package helps with this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">copy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Mc</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
</pre></div>
</div>
<p>As an extra (ungraded) challenge, write a function that computes all valid paths for the given input.</p>
</section>
</section>
<section id="a-problem-with-recursion">
<h2 id="a-problem-with-recursion">A problem with recursion<a class="headerlink" href="#a-problem-with-recursion" title="Link to this heading">¬∂</a></h2>
<p>Pull up your Fibonacci function <code class="docutils literal notranslate"><span class="pre">fib(n)</span></code> from <a class="reference internal" href="lab12.html"><span class="doc">Lab 12: Recursion</span></a> and see how long it takes to compute the <code class="docutils literal notranslate"><span class="pre">40</span></code>-th Fibonacci number.
To do this, first run the following code:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">timeit</span> <span class="kn">import</span> <span class="n">default_timer</span> <span class="k">as</span> <span class="n">timer</span>
</pre></div>
</div>
<p>Then you can measure how long it takes (in seconds) to compute <code class="docutils literal notranslate"><span class="pre">fib(40)</span></code> by running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span>
<span class="n">fib</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
</pre></div>
</div>
<p>The thing you should learn from this is: recursion makes for beautiful code but often expensive results.
The reason it takes so long to compute <code class="docutils literal notranslate"><span class="pre">fib(40)</span></code> is that all of the earlier Fibonacci numbers are computed <em>several times</em> in order to compute the <code class="docutils literal notranslate"><span class="pre">40</span></code>-th. To test this out, add the following print command in the base case of your <code class="docutils literal notranslate"><span class="pre">fib</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">n</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">n</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"I'm calling the base case"</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Unsurprisingly, this prints ‚ÄúI‚Äôm calling the base case‚Äù every time the base case is called.
Now run <code class="docutils literal notranslate"><span class="pre">fib(10)</span></code> and watch the flood of output.
In theory, computing the <code class="docutils literal notranslate"><span class="pre">10</span></code> -th Fibonacci number ‚Äúby hand‚Äù should only call the base case once or twice.</p>
</section>
<section id="task-3-fast-fibonacci">
<h2 id="task-3-fast-fibonacci">Task 3: Fast Fibonacci<a class="headerlink" href="#task-3-fast-fibonacci" title="Link to this heading">¬∂</a></h2>
<p>In order to speed up our Fibonacci function, we‚Äôll use a programming technique called ‚Äúmemoization‚Äù.
(The name is awkward, but the technique is great.)
The idea is that to compute <code class="docutils literal notranslate"><span class="pre">fib(41)</span></code> we shouldn‚Äôt have to do much work, because we already computed <code class="docutils literal notranslate"><span class="pre">fib(40)</span></code> and, while computing <code class="docutils literal notranslate"><span class="pre">fib(40)</span></code>, we computed <code class="docutils literal notranslate"><span class="pre">fib(39)</span></code>.
So it would be nice if Python would just remember that for us.
Luckily, there‚Äôs a built-in Python tool just for that:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>
<span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">256</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">blah</span> <span class="n">blah</span> <span class="n">blah</span>
</pre></div>
</div>
<p>The line starting with <code class="docutils literal notranslate"><span class="pre">@</span></code> needs to come immediately before your function definition. Replace <code class="docutils literal notranslate"><span class="pre">blah</span> <span class="pre">blah</span> <span class="pre">blah</span></code> by the code you already wrote for the <code class="docutils literal notranslate"><span class="pre">fib</span></code> function. Now see how fast your function computes <code class="docutils literal notranslate"><span class="pre">fib(40)</span></code>. And just for fun, see how fast it computes <code class="docutils literal notranslate"><span class="pre">fib(200)</span></code>. It should compute this in less than one second; don‚Äôt submit your code to CodeBuddy until you have memoization working properly.</p>
</section>
<section id="task-4-towers-of-hanoi">
<h2 id="task-4-towers-of-hanoi">Task 4: Towers of Hanoi<a class="headerlink" href="#task-4-towers-of-hanoi" title="Link to this heading">¬∂</a></h2>
<p>There is a legend about an Indian temple in Kashi Vishwanath which contains a large room with three time-worn posts in it.
At the beginning of time, the leftmost post was surrounded by 64 golden disks.
Brahmin priests, acting out the command of an ancient prophecy, have been moving these disks in accordance with the immutable rules of Brahma since that time, in an effort to move the disks to the rightmost post.
The rules are:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Only one disk can be moved at a time.</p></li>
<li><p>Each move consists of taking the upper disk from one of the stacks and placing it on top of another stack or on an empty post.</p></li>
<li><p>No larger disk may be placed on top of a smaller disk.</p></li>
</ol>
</div></blockquote>
<p>When the last move of the puzzle is completed, the world will end.
Your task is to determine how soon the world will end, given that the priests can move one disk per second.</p>
<p>Start by playing the <a class="reference external" href="https://www.webgamesonline.com/towers-of-hanoi/index.php">https://www.webgamesonline.com/towers-of-hanoi/index.php</a>.
Play with 3 disks first until you have a solution that takes the minimal number of moves (in this case, 7 moves).
Then move on to 4 disks until you have a solution that takes 15 moves. Keep playing with more disks until you see the pattern. Don‚Äôt read on until you‚Äôre done with this step.</p>
<p>Let‚Äôs call the leftmost and rightmost posts the ‚Äúsource‚Äù and ‚Äútarget,‚Äù respectively.
We‚Äôll call the middle post ‚Äúaux.‚Äù
How do we solve the puzzle when there are two disks?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">move the top disk source --&gt; aux</span>
<span class="go">move the next disk source --&gt; target</span>
<span class="go">move the top disk aux --&gt; target</span>
</pre></div>
</div>
<p>When there are three disks?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">move the top [two disks] source --&gt; aux (use the solution for two disks)</span>
<span class="go">move the third disk source --&gt; target</span>
<span class="go">move the top [two disks] aux --&gt; target (use the solution for two disks)</span>
</pre></div>
</div>
<p>Write a function <code class="docutils literal notranslate"><span class="pre">hanoi(n,</span> <span class="pre">source,</span> <span class="pre">aux,</span> <span class="pre">target)</span></code> that takes in an integer <code class="docutils literal notranslate"><span class="pre">n</span></code> and the names of the source, aux, and target posts as strings.
Do not implement memoization for this function.
Your function should move the top <code class="docutils literal notranslate"><span class="pre">n</span></code> disks from source to target, using aux for help.
At each move, print ‚Äúmove from post _ to post _‚Äù, like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hanoi</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="s1">'A'</span><span class="p">,</span><span class="s1">'B'</span><span class="p">,</span><span class="s1">'C'</span><span class="p">)</span>
<span class="go">'move from post A to post C'</span>
<span class="go">'move from post A to post B'</span>
<span class="go">'move from post C to post B'</span>
<span class="go">'move from post A to post C'</span>
<span class="go">'move from post B to post A'</span>
<span class="go">'move from post B to post C'</span>
<span class="go">'move from post A to post C'</span>
</pre></div>
</div>
<p>For how many years will the priests be moving disks? Remember that there are 64 disks and the priests can move one disk per second.</p>
<p><em>Hint:</em> don‚Äôt run <code class="docutils literal notranslate"><span class="pre">hanoi(64,...)</span></code> ‚Äì instead try to find the pattern. Can you prove by induction that your pattern is correct?</p>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="lab16.html" title="Lab 16: The Gram-Schmidt Process"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> "Previous" </span> Lab 16: The Gram-Schmidt Process </span>
              </div>
            </a>
          
          
            <a href="lab18.html" title="Lab 18: Modular Arithmetic"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> "Next" </span> Lab 18: Modular Arithmetic </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2024, Nick Andersen.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>